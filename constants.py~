# all the constants 
import numpy as np


EMPTY = None
NOT_ASSIGNED = None
NULL_EDGE = 'null_edge'
NULL_TAG = 'null_tag'

ROOT_FORM = '_ROOT_FORM_'
ROOT_LEMMA = '_ROOT_LEMMA_'
ROOT_POS = '_ROOT_POS_'
ROOT_CPOS = '_ROOT_CPOS_'
FAKE_ROOT_VAR = 'x'
FAKE_ROOT_CONCEPT = 'xconcept'
FAKE_ROOT_EDGE = 'x'

NEXT1 = 0
NEXT2 = 1
REATTACH = 2
DELETENODE = 3
SWAP = 4
ADDCHILD = 5
REPLACEHEAD = 6
MERGE = 7
DELETEEDGE = 8



PRE_MERGE_NETAG = ['PERSON','LOCATION','ORGANIZATION']


WEIGHT_DTYPE=np.float32

DETERMINE_TREE_TO_GRAPH_ORACLE = 1
DETERMINE_TREE_TO_GRAPH_ORACLE_SC = 2
DETERMINE_STRING_TO_GRAPH_ORACLE = None

ACTION_WITH_TAG = set([NEXT2])
ACTION_WITH_EDGE = set([NEXT1,ADDCHILD])

ACTION_TYPE_TABLE = {}
ACTION_TYPE_TABLE['basic'] = [(NEXT1,'next1'),(NEXT2,'next2'),(REATTACH,'reattach'),(DELETENODE,'delete_node'),(SWAP,'swap'),(ADDCHILD,'add_child'),(REPLACEHEAD,'replace_head'),(MERGE,'merge')]

FEATS_ABBR = {}
FEATS_ABBR['w'] = 'form'
FEATS_ABBR['t'] = 'pos'
FEATS_ABBR['ne'] = 'ne'
FEATS_ABBR['dl'] = 'rel'
FEATS_ABBR['p1'] = 'p1'
FEATS_ABBR['lsb'] = 'lsb'
FEATS_ABBR['rsb'] = 'rsb'
FEATS_ABBR['r2sb'] = 'r2sb'

DEFAULT_RULE_FILE = './rules/dep2amrLabelRules'

def _load_rules(rule_file):
    rf = open(rule_file,'r')
    d = {}
    for line in rf.readlines():
        if line.strip():
            dep_rel,amr_rel,_ = line.split()
            if dep_rel not in d: d[dep_rel] = amr_rel[1:]
        else:
            pass
    return d


__DEP_AMR_REL_TABLE = _load_rules(DEFAULT_RULE_FILE)
def get_fake_amr_relation_mapping(dep_rel):
    return __DEP_AMR_REL_TABLE[dep_rel]
    


